function DATA = AddErr(DATA,varargin)showerr = 0;exclude = [];style = 'errors';if isobject(varargin{1})    ERR = varargin{1};    varargin = varargin(2:end);else    ERR = [];endfor j = 1:length(varargin)    if strcmp(varargin{j},'-color')        exclude = [exclude j j+1];        j = j+1;        style = varargin{j};    elseif strcmp(varargin{j},'-show')        showerr = 1;        exclude = [exclude j];    elseif strcmp(varargin{j},'-warning') %not serious, but log        ERR.warningonly = 1;    end    j = j+1;endid = setdiff(1:length(varargin),exclude);s = sprintf(varargin{id});mycprintf(style,'%s\n',s);if showerr && DATA.interactive >= 0    warndlg(s,'AllVPcs Error');endif isfield(DATA,'errs')    DATA.nerr = length(DATA.errs)+1;else    DATA.nerr = 1;endDATA.errs{DATA.nerr} = s;DATA.errtime(DATA.nerr) = now;DATA.errobj{DATA.nerr} = ERR;if isfield(DATA,'logfid') && DATA.logfid > 0    try        fprintf(DATA.logfid,'%s\r\n',s);    catch        fprintf('fid %d no longer valid\n',DATA.logfid);    endend