function AddParameterMenu(F, callback, tag)%builds a menu that selects parameters for plotting spikes%Idea is that a parameter name added here will be converted into%a value by AllV.GetValues. No other work should be needed    DATA = GetDataFromFig(F);    if ~isfield(DATA,'TemplateLabels')        cprintf('red','Figure %d Can''t get UserData\n',double(F));        return;    end    it = findobj(F,'tag',tag,'type','uimenu');    delete(it);    hm = uimenu(F,'label',tag,'Tag',tag);    sm = uimenu(hm,'label','PC');    for j = 1:12        s = sprintf('PC%d',j);        uimenu(sm,'Label',s,'callback',{callback, tag, s});    end    sm = uimenu(hm,'label','Template');    for j = 1:length(DATA.TemplateLabels)        s = DATA.TemplateLabels{j};        uimenu(sm,'Label',s,'callback',{callback, tag, s});    end    sm = uimenu(hm,'label','ADC');    probes = unique(DATA.vpts(:,[1 3]));    pts = unique(DATA.vpts(:,[2 4]));    for j = 1:size(probes,1)        for k = 1:size(pts);            s = sprintf('ADC %d:%d',probes(j),pts(k));            uimenu(sm,'Label',s,'callback',{callback, tag, s});        end    end        strs = {};    for j = 1:length(DATA.chspk)        strs{j} = sprintf('energy%d',DATA.chspk(j));    end    strs = {strs{:} 'energysum' 'spkvar' 'ADC1' 'ADC2' 'ADC1dvdt' 'ADC2dvdt' 'ADC1dvdy1' 'ADC1dvdy2'  'ADC1csd' 'Centroid' 'CentroidSplit'};    for j = 1:length(strs)        str = strs{j};        if strcmp(str,'ADC1')            str = sprintf('%d:%d',DATA.vpts(1,1),DATA.vpts(1,2));        elseif strcmp(str,'ADC2')            str = sprintf('%d:%d',DATA.vpts(2,1),DATA.vpts(2,2));        end                    uimenu(hm,'Label',str,'callback',{callback, tag, strs{j}});    end        