function ExptFigMenu(a,b, mode)DATA = GetDataFromFig(a);onoff = {'off' 'on'};if strcmp(mode,'fit')%    dip = FindDip(DATA.xy{1}(:,1),DATA.energy(1,:),'plot');    DATA.plot.exptfit = ~DATA.plot.exptfit;    set(a,'Checked',onoff{DATA.plot.exptfit+1});    if DATA.plot.exptfit        [Expt, res] = AllV.PlotExptCounts(DATA);    end    set(DATA.toplevel,'UserData',DATA);elseif mode == 2    [a,b,c] = AllV.BestGMAngle(DATA.xy{1}(:,1),DATA.xy{1}(:,2));    AllV.SetFigure(DATA.tag.dips, DATA,DATA.watcharg{:});    hold off;     plot(c.angles,c.mahal);    title(sprintf('Mahal 1D %.3f at %.2fdeg , 2D %.3f',b, a .*180/pi,c.mahal2d));elseif mode == 3    AllV.PlotHistogram(DATA, [],'plotgmdetails');elseif mode == 4    DATA.cluster.crit(1) = -DATA.cluster.crit(1);%    AllV.PlotHistogram(DATA, []);    set(DATA.toplevel,'UserData',DATA);    AllV.PCCluster(a,b,34);end