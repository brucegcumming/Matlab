function HistButtonPressed(src, data)DATA = get(src,'UserData'); %not the main fig data. hust for this onestart = get(gca,'CurrentPoint');bt = strmatch(get(gcf,'SelectionType'),{'normal' 'alternate'  'extend'  'open'})if bt == 2    mode = 1;  %allow angled lineelse    mode = 3; %just translate criterionend%mode = 3;  %only allow line translation at the momentDATA.elmousept.mode = mode;DATA.elmousept.shape = 1;DATA.elmousept.pos(1) = start(1,1);yl = get(gca,'ylim');if mode == 3DATA.elmousept.pos(3) = start(1,1);DATA.elmousept.pos(4) = yl(2);DATA.elmousept.pos(2) = yl(1);elseDATA.elmousept.pos(2) = start(1,2);DATA.elmousept.pos(3) = start(1,1);DATA.elmousept.pos(4) = start(1,2);endif start(1,2) < yl(2) && start(1,2) > yl(1)    DATA.elmousept.down = 1;else    return;endDATA.elmousept.axis = gca;DATA.elmousept.plotargs = {};DATA.elmousept.h = [];DATA.elmousept.h = AllV.DrawEllipse(DATA.elmousept);subplot(2,1,1);hold on;DATA.elmousept.h2 = plot(DATA.elmousept.pos([1 3]),get(gca,'ylim'),'r-');subplot(2,1,2);set(src,'UserData',DATA);