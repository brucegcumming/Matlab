function C = CheckScoreScaling(DATA, C)%Template scores are all normalized so that spaces are roughly isotropic%This can cause a porblem with reapplying when the ratio of%spikes/nonspikes changes because the SD of the scores changes. So %rescale the cluster to compensate for any change in the scalingif DATA.cluster.strictscaling == 0    return;endif DATA.currentcluster == 1    if isfield(C,'rescaled') && C.rescaled == 1        return;    end    if C.space(1) == 3 && isfield(C,'spacescale')        newscale = DATA.TemplateScaling(C.space(2:end));        dscale = sqrt(sum(newscale .^2)./sum(C.spacescale.^2));        C.xyr = C.xyr ./ dscale;        C.pos = C.pos ./ dscale;        C.crit = C.crit ./ dscale;        C.rescaled = 1;    endelse    k = DATA.currentcluster -1;    if isfield(C.next{k},'rescaled') && C.next{k}.rescaled == 1        return;    end    if C.next{k}.space(1) == 3 && isfield(C.next{k},'spacescale')        newscale = DATA.TemplateScaling(C.next{k}.space(2:end));        dscale = sqrt(sum(newscale .^2)./sum(C.next{k}.spacescale.^2));        C.next{k}.xyr = C.next{k}.xyr ./ dscale;        C.next{k}.pos = C.next{k}.pos ./ dscale;        C.next{k}.rescaled = 1;    endend        