function AddPlotMenu(sm, type)onoff = {'off' 'on'};    if strcmp(type,'probes')    uimenu(sm,'Label','&Probe All Spks +xy','Callback',{@PC.PlotMenu, 'probes', 'probeall'});    uimenu(sm,'Label','&Expt All Spks +xy','Callback',{@PC.PlotMenu, 'probes', 'exptall'},'accelerator','e');    uimenu(sm,'Label','Spool All Probes','Callback',{@PC.PlotMenu, 'probes', 'spoolall'});    uimenu(sm,'Label','Spool All Probes All Expts','Callback',{@PC.PlotMenu, 'probes', 'spooleverything'});    uimenu(sm,'Label','Spool Probes With Cells','Callback',{@PC.PlotMenu, 'probes', 'spoolcells'});    uimenu(sm,'Label','A&ll Spks This Expt','Callback',{@PC.PlotMenu, 'probes', 'allspks'});    uimenu(sm,'Label','&All Spks This Probe','Callback',{@PC.PlotMenu, 'probes', 'allprobespks'});    uimenu(sm,'Label','All Spks Template Peaks','Callback',{@PC.PlotMenu, 'probes', 'alltemplatespks'});    uimenu(sm,'Label','&Selected Spks','Callback',{@PC.PlotMenu, 'probes', 'selectspks'});    uimenu(sm,'Label','All Cell Spks This Expt','Callback',{@PC.PlotMenu, 'probes', 'allcellspks'});    uimenu(sm,'Label','Selected XY','Callback',{@PC.PlotMenu, 'probes', 'SelectXY'});    uimenu(sm,'Label','All &XY This Expt','Callback',{@PC.PlotMenu, 'probes', 'AllXY'},'accelerator','x');    uimenu(sm,'Label','All X&Y This Probe','Callback',{@PC.PlotMenu, 'probes', 'AllprobeXY'},'accelerator','y');    uimenu(sm,'Label','All XY Template Pekas','Callback',{@PC.PlotMenu, 'probes', 'AllTemplateXY'});    uimenu(sm,'Label','Mean Spikes','Callback',{@PC.PlotMenu, 'probes', 'AllMean'});    uimenu(sm,'Label','All Cluster Mean Spikes','Callback',{@PC.PlotMenu, 'probes', 'AllClusterMean'});    uimenu(sm,'Label','All Probes Mean Spike','Callback',{@PC.PlotMenu, 'probes', 'AllProbeMean'});    uimenu(sm,'Label','Mean Spikes Image','Callback',{@PC.PlotMenu, 'probes', 'AllMeanIm'});    uimenu(sm,'Label','Mean Spike All Probes and Expts','Callback',{@PC.PlotMenu, 'probes', 'AllExptMeanIm'});    uimenu(sm,'Label','Spike dprime All Probes and Expts','Callback',{@PC.PlotMenu, 'probes', 'AllExptdpIm'});    elseif strcmp(type,'cells')        uimenu(sm,'Label','All&XY','Callback',{@PC.PlotMenu, 'cells', 'AllXY'});        uimenu(sm,'Label','All&Mean','Callback',{@PC.PlotMenu, 'cells', 'AllMean'});        uimenu(sm,'Label','AllMean&Im','Callback',{@PC.PlotMenu, 'cells', 'AllMeanIm'});        uimenu(sm,'Label','All&TrigHist','Callback',{@PC.PlotMenu, 'cells', 'TrigHist'});        uimenu(sm,'Label','Spool All - This expt','Callback',{@PC.PlotMenu, 'cells', 'spoolall'});        uimenu(sm,'Label','Spool All - All expts','Callback',{@PC.PlotMenu, 'cells', 'spooleverycell'});        uimenu(sm,'Label','Spool selected, all &expts','Callback',{@PC.PlotMenu, 'cells', 'spoolone'});        uimenu(sm,'Label','AllSpks Cell','Callback',{@PC.PlotMenu, 'cells', 'allspks'});        uimenu(sm,'Label','All Spks All Cells','Callback',{@PC.PlotMenu, 'cells', 'allcellspks'});        uimenu(sm,'Label','All Cells Spks Expt','Callback',{@PC.PlotMenu, 'probes', 'cellspks'});        uimenu(sm,'Label','Spool All Cells','Callback',{@PC.PlotMenu, 'cells', 'spoolall'});        uimenu(sm,'Label','Rate &Sequence','Callback',{@PC.PlotMenu, 'cells', 'rateseqone'});        uimenu(sm,'Label','&Rate Sequence All Cells','Callback',{@PC.PlotMenu, 'cells', 'rateseqall'});    elseif strcmp(type,'show')        DATA = GetDataFromFig(sm);        uimenu(sm,'Label','ISI Hist','Callback',{@PC.PlotMenu, 'showplot'},'tag','isihist');        uimenu(sm,'Label','Histogram','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'hist');        uimenu(sm,'Label','Trigger Histogram','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'trighist');        uimenu(sm,'Label','Mean Spike','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'spkmean');        uimenu(sm,'Label','Show GM Fit','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'gmfit');        uimenu(sm,'Label','Refit GM model','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'refitgm');        uimenu(sm,'Label','XY Sequence','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'xyseq');        uimenu(sm,'Label','Spike Waveforms','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'quickspks');        uimenu(sm,'Label','XY Plot','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'spkxy');        uimenu(sm,'Label','XY for AutoCl','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'autoxy');        uimenu(sm,'Label','AutoComparizon','Callback',{@PC.PlotMenu, 'showplot'},'tag', 'autocompare');        set(sm,'Tag','DataShowMenu');    elseif strcmp(type,'xcorrplot')        F = GetFigure(sm);        it = findobj(sm,'type','uimenu','tag','xcorrplot');        if ~isempty(it);            delete(it);        end        hm = uimenu(sm,'Label','&Plot','tag','xcorrplot');        uimenu(hm, 'label','Shape/Efficacy','CallBack', {@PC.ReplotXcorrs, 'Shape/efficacy'});        uimenu(hm, 'label','Efficacy Image','CallBack', {@PC.ReplotXcorrs, 'Efficacy'});        uimenu(hm, 'label','Efficacy: narrow-wide','CallBack', {@PC.ReplotXcorrs, 'cmpEfficacy'});        uimenu(hm, 'label','Efficacy-Nspks','CallBack', {@PC.ReplotXcorrs, 'nspkEfficacy'});        uimenu(hm, 'label','Efficacy-separation','CallBack', {@PC.ReplotXcorrs, 'efficsep'});        uimenu(hm, 'label','Separation Image','CallBack', {@PC.ReplotXcorrs, 'pairsep'});        uimenu(hm, 'label','Find Duplicates Image','CallBack', {@PC.ReplotXcorrs, 'duplicates'});        uimenu(hm, 'label','Curent Duplicates Image','CallBack', {@PC.ReplotXcorrs, 'showduplicates'});        sm = uimenu(hm,'Label','&One Pair Type');        uimenu(sm, 'label','&CorssCorr','CallBack', {@PC.ReplotXcorrs, 'xcorr'});        uimenu(sm, 'label','&Mean Image','CallBack', {@PC.ReplotXcorrs, 'meanim'});        uimenu(sm, 'label','&Sync Spikes','CallBack', {@PC.ReplotXcorrs, 'syncspikes'});        uimenu(sm, 'label','&Histograms','CallBack', {@PC.ReplotXcorrs, 'histograms'});        uimenu(sm, 'label','&All','CallBack', {@PC.ReplotXcorrs, 'alleg'});    end    