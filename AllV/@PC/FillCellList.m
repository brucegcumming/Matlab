function DATA =  FillCellList(DATA, mode)    Clusters = getappdata(DATA.toplevel,'Clusters')    if strcmp(mode,'frommark')        for j = 1:length(Clusters)            for k = 1:length(Clusters{j})                C = Clusters{j}{k};                if isfield(C,'marked')                    marked(j,k) = C.marked;                else                    marked(j,k) = 1;                end                if isfield(C,'exptno')                    exptids(j) = C.exptno;                end            end        end        if size(marked,1) > 10            crit = 5;        else             crit = size(marked,1)/2;        end        id = find(sum(marked==2) >= crit);        for j = 1:length(id)            gid = find(marked(:,id(j)) ==2);            DATA.CellList(gid, id(j),1) = j;        end        if ~isfield(DATA.CellDetails,'exptids')            DATA.CellDetails.exptids = exptids;        end        PC.PlotCellList(DATA);        s = questdlg('Use This CellList?','Cell List','OK','No','No');        if strcmp(s,'OK')             PC.SaveCellList(DATA);            set(DATA.toplevel,'UserData',DATA);        end    end    