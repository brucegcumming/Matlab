 function PlotISI(a, b, type)      DATA = GetDataFromFig(a);     if isfield(DATA,'clst')         tid = find(DATA.clst == 2);         t = DATA.t(tid);     else         DataClusters = AllV.mygetappdata(DATA,'Clusters');         t = DataClusters{DATA.probe(1)}.times;     end     isi = diff(t);     AllV.SetFigure('ISI', DATA);     set(gcf,'UserData',DATA.toplevel);     if type == 1         if DATA.plot.isi == 1             DATA.plot.isi = 0;             set(a,'Checked','off');             set(DATA.toplevel,'UserData',DATA);             return;         else             DATA.plot.isi = 1;             set(a,'Checked','on');             set(DATA.toplevel,'UserData',DATA);         end     elseif type == 0         type = 1;     end     if type == 1     [a,b] = hist(isi,[0:0.0005:0.1]);     hold off;     bar(b(1:end-1),a(1:end-1));     id = find(isi < 0.002);     if size(tid,1) == 1         sid = cat(2,tid(id), tid(id+1));     else         sid = cat(1,tid(id), tid(id+1));     end%     sid = tid(id+1);     AllV.ReplotPCs(DATA,[],'setid',sid);     elseif type == 2         hold off;         for j = 1:length(isi)         plot(t(j+1),isi(j),'o','buttondownfcn',{@AllV.HitISI, t(j+1)});         hold on;         end         set(gca,'ylim',[0 0.005]);     end         