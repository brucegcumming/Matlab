function ButtonReleased(src, data)DATA = GetDataFromFig(src);if DATA.elmousept.down == 0     return;endmode = DATA.elmousept.down;start = get(gca,'CurrentPoint');DATA.elmousept.done = 1;p = DATA.elmousept.pos;DATA.elmousept.pcplot = get(gca,'UserData');DATA.elmousept.down = 0;if length(DATA.elmousept.pcplot) > 2 && isnan(DATA.elmousept.pcplot(1))    DATA.elmousept.space = DATA.elmousept.pcplot(2:end);else    DATA.elmousept.space = [DATA.plottype DATA.elmousept.pcplot];endif mode == 1DATA.elmousept.xyr = [mean(p([1 3])) mean(p([2 4])) abs(diff(p([1 3]))/2) abs(diff(p([2 4]))/2)]; elseif mode == 2  %button was pressed inside ellipse, just move itDATA.elmousept.xyr = [mean(p([1 3])) mean(p([2 4])) abs(diff(p([1 3]))/2) abs(diff(p([2 4]))/2)]; endxyr = DATA.elmousept.xyr;set(DATA.toplevel,'UserData',DATA);%touch inside ellispe to make cut. If drawing a line, make cut when%releasedif mode == 2  || DATA.elmousept.shape  ==1     if strncmp(DATA.elmousept.type,'gmm',3)        AllV.GMMButton(DATA, DATA.elmousept,DATA.elmousept.type);    else        AllV.PCCluster(DATA,DATA.elmousept,1);    endend